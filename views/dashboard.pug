doctype html
html(lang="es")
  head
    meta(charset="UTF-8")
    title Header - GoalBridge
    link(rel="stylesheet", href="/css/style.css")

  body
    //- header.pug
    header
block content
  .dashboard-container
    // Create Job Offer Form
    section.create-offer-section
      h2.section-title Crear un anuncio
      form.dashboard-form(action="/joboffers", method="POST")
        .dashboard-form-group
          label(for="puesto") Puesto:
          input(type="text", id="puesto", name="puesto", required)
        .dashboard-form-group
          label(for="empresa") Empresa:
          input(type="text", id="empresa", name="empresa", required)
        .dashboard-form-group
          label(for="salario") Salario:
          input(type="text", id="salario", name="salario", required)
        .dashboard-form-group
          label(for="descripcion") Descripción:
          textarea#descripcion.form-textarea(name="descripcion", required)
        .dashboard-form-group
          label(for="modalidad") Modalidad:
          input(type="text", id="modalidad", name="modalidad", required)
        .dashboard-form-group
          label(for="requisitos") Requisitos:
          textarea#requisitos.form-textarea(name="requisitos", required)
        .dashboard-form-group
          label(for="link") Link:
          input(type="text", id="link", name="link")
        button.dashboard-submit(type="submit") Crear Oferta

    // Search Job Offers
    section.search-section
      h2.section-title Buscar Ofertas de Trabajo
      form.search-form(action="/joboffers", method="GET")
        .search-group
          input.search-input(type="text", name="keyword", placeholder="Buscar ofertas...")
          button.search-button(type="submit") Buscar

    // Display Job Offers
    section.offers-section
      h2.section-title Ofertas de Trabajo
      .offers-grid
        each offer in jobOffers
          .offer-card
            h3.offer-title= offer.puesto
            .offer-company
              span.label Empresa: 
              span.value= offer.empresa
            .offer-salary
              span.label Salario: 
              span.value= offer.salario
            .offer-description
              span.label Descripción: 
              span.value= offer.descripcion.length > 150 ? offer.descripcion.substring(0, 147) + '...' : offer.descripcion
            .offer-modality
              span.label Modalidad: 
              span.value= offer.modalidad
            .offer-requirements
              span.label Requisitos: 
              span.value= offer.requisitos.length > 150 ? offer.requisitos.substring(0, 147) + '...' : offer.requisitos
            if offer.link
              .offer-link
                a.link-button(href=offer.link, target="_blank") Ver oferta original
            .offer-actions
              button.action-button.edit-button(onclick=`toggleEditForm('${offer._id}')`) Editar
              form.delete-form(action=`/joboffers/${offer._id}/delete`, method="POST", style="display: inline;")
                button.action-button.delete-button(type="submit") Eliminar
            
            .edit-form-container(id=`edit-form-${offer._id}`, style="display: none;")
              form.edit-form(action=`/joboffers/${offer._id}/edit`, method="POST")
                input(type="text", name="puesto", value=offer.puesto)
                input(type="text", name="empresa", value=offer.empresa)
                input(type="text", name="salario", value=offer.salario)
                textarea(name="descripcion")= offer.descripcion
                input(type="text", name="modalidad", value=offer.modalidad)
                textarea(name="requisitos")= offer.requisitos
                input(type="text", name="link", value=offer.link)
                button.action-button.save-button(type="submit") Guardar Cambios

  script.
    function toggleEditForm(offerId) {
      const formContainer = document.getElementById(`edit-form-${offerId}`);
      formContainer.style.display = formContainer.style.display === 'none' ? 'block' : 'none';
    }